<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>List de Almacenes</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">

</head>

<body>

  <!-- ------------------------------------------------------------------------- -->

  <th:block th:if="${funcionalidad=='formulario'}">

    <form th:object="${almacen}" method="post" th:action="@{${ruta}}">
      <!-- se utiliza para definir la URL a la que se enviarán 
        los datos del formulario cuando este se envía. -->

      <!-- th:object: Al aplicarse Thymeleaf enlazará automáticamente los campos del formulario con los atributos del objeto,
           lo que permite que los datos ingresados por el usuario se reflejen directamente en el objeto y
            viceversa. -->

      <input type="hidden" th:field="*{idAlmacen}">
      <!-- //type:hidden: no se muestra a los usuario y contiene información que 
                se envía al base de datos cuando el formulario se envía -->

      <label for="nombreUnico">Nombre del Almacen</label> <br>
      <input type="text" th:field="*{nombreUnico}" required>
      <br>

      <label for="numeroUnico">Numero del Almacen</label> <br>
      <input type="text" th:field="*{numeroUnico}" required>
      <!--th:field="${almacen.numeroUnico}" == th:field="*{edad}"  -->

      <br>

      <label for="descripcion">Descripción </label> <br>
      <input type="text" th:field="*{descripcion}" required>
      <br>

      <!-- <button type="submit" value="Registrar" ></button> -->

      <input type="submit" name="Envier" th:value="${tipoFormulario}">

    </form>

  </th:block>

  <!-- ------------------------------------------------------------------------- -->


  <!-- ------------------------------------------------------------------------- -->

  <th:block th:if="${funcionalidad=='lista'}">

    <div th:switch="${tipoLista}">

      <div th:case="'Eliminar'">
        <a th:href="@{/almacen/listar-eliminados}">Eliminados</a>
      </div>
      
      <div th:case="'Activar'">
        <a th:href="@{/almacen/listar}">Activos</a>
      </div>

    </div>

    <!-- <button type="submit" th:switch="${tipoLista}">
        <span th:case="'Eliminar'"  th:href="@{/almacen/listar-eliminados}">Eliminados</span>
        <span th:case="'Activar'" th:href="@{/almacen/listar}">Activos</span>
      </button>


 <input type="text" th:switch="${tipoLista}">
    <input type="text" th:case="'Eliminar'" placeholder="Mostrar Almacenes Eliminados">
    <input type="text" th:case="'Activar'" placeholder="Mostrar Almacenes Activos">
    Placeholder predeterminado si no coincide con ningún caso 
     <input type="text" th:case="*" placeholder="Ingrese su información...">
</input>  -->

    <br>

    <a th:href="@{/almacen/formulario-registrar}">Registrar Almacen</a>

 <form th:action="@{${tipobusqueda}}" method="get">
        <label for="buscador">Buscar Almacen por Nombre</label> <br>
        <input type="text" class="form-control" name="nombreUnico">
        <button type="submit"> Buscar</button>
      </form>

    <table class="table" style="width: 100%">

      <div th:if="${exitoso}" th:text="${exitoso}"></div> <br>
      
      <thead>

        <tr>

          <th scope="col">Nombre</th>
          <th scope="col">Numero</th>
          <th scope="col">Descripción</th>
          <th scope="col">Operaciones</th>

        </tr>

      </thead>

      <tbody>

        <tr  th:each="almacen : ${listaAlmacenes}" th:if="${almacen.estado.name() == estados}">

          <td th:text="${almacen.nombreUnico}"></td>
          <td th:text="${almacen.numeroUnico}"></td>
          
          <td th:text="${almacen.descripcion}"></td>

        

          <td>

            <a th:href="@{/almacen/formulario-modificar/{id}(id=${almacen.idAlmacen})}">Modificar</a>
            <br>
            <form th:action="@{${ruta1}}" method="post">
              <input type="hidden" name="idAlmacen" th:value="${almacen.idAlmacen}">
              <input type="submit" th:value="${tipoLista}"></input>
            </form>

            <!-- <a th:href="@{/almacen/eliminar/${almacen.id}}">Eliminar</a> -->

          </td>

        </tr>

      </tbody>

    </table>

  </th:block>

  <!-- ------------------------------------------------------------------------- -->



  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
    crossorigin="anonymous"></script>
</body>

</html>